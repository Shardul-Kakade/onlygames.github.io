<!-- index.html -->
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>OnlyGames â€” Demo</title>
    <style>
        :root{
            --bg:#0f1720; --card:#0b1220; --muted:#9aa7b2; --accent:#60a5fa;
            --glass: rgba(255,255,255,0.03);
            color-scheme: dark;
        }
        html,body{height:100%; margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:linear-gradient(180deg,#071021 0%, #071529 60%); color:#e6eef6}
        .app{max-width:1100px;margin:28px auto;padding:20px;}
        header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:20px}
        h1{font-size:20px;margin:0;display:flex;gap:10px;align-items:center}
        .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#3b82f6,#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 4px 18px rgba(96,165,250,0.12)}
        .search{display:flex;gap:8px;flex:1;margin-left:18px;max-width:520px}
        .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit;outline:none}
        .filters{display:flex;gap:8px;align-items:center}
        .chip{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted);font-size:13px;cursor:pointer}
        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));gap:16px;margin-top:18px}
        .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:10px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}
        .thumb{height:110px;border-radius:8px;background:linear-gradient(180deg,#081226,#071122);display:flex;align-items:center;justify-content:center;font-size:38px}
        .meta{display:flex;justify-content:space-between;align-items:center}
        .title{font-weight:600}
        .tags{font-size:12px;color:var(--muted)}
        .controls{display:flex;gap:8px}
        .btn{padding:8px 12px;border-radius:8px;background:var(--accent);color:#05243a;border:none;cursor:pointer;font-weight:600}
        .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
        footer{margin-top:26px;color:var(--muted);font-size:13px;text-align:center}
        /* modal */
        .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(0deg,rgba(2,6,23,0.7),rgba(2,6,23,0.7));backdrop-filter:blur(4px);z-index:60}
        .modal.open{display:flex}
        .player{width:min(980px,95vw);height:min(640px,90vh);background:#051125;border-radius:12px;padding:14px;display:flex;flex-direction:column;gap:10px;box-shadow:0 18px 40px rgba(2,6,23,0.7)}
        .player-header{display:flex;justify-content:space-between;align-items:center}
        .player-title{font-weight:700}
        .player-body{flex:1;background:#041027;border-radius:8px;display:flex;align-items:center;justify-content:center;padding:12px;position:relative}
        canvas{background:#021223;border-radius:6px;max-width:100%;height:auto}
        .controls-row{display:flex;gap:8px}
        .small{padding:6px 8px;font-size:13px}
        .empty{color:var(--muted)}
        @media (max-width:520px){ .search{display:none} .player{width:95vw;height:85vh} }
    </style>
</head>
<body>
    <div class="app" id="app">
        <header>
            <div style="display:flex;align-items:center;">
                <div class="logo">OG</div>
                <h1>OnlyGames â€” Demo</h1>
                <div class="search">
                    <input id="search" placeholder="Search games, e.g. snake, pong..." />
                </div>
            </div>
            <div class="filters">
                <div class="chip" data-filter="">All</div>
                <div class="chip" data-filter="arcade">Arcade</div>
                <div class="chip" data-filter="puzzle">Puzzle</div>
                <div class="chip" data-filter="classic">Classic</div>
            </div>
        </header>

        <section class="grid" id="grid"></section>

        <footer>Demo site â€” small collection of built-in HTML5 games</footer>
    </div>

    <div class="modal" id="modal" aria-hidden="true">
        <div class="player" role="dialog" aria-modal="true">
            <div class="player-header">
                <div>
                    <div class="player-title" id="playerTitle">Game</div>
                    <div class="tags" id="playerTags">tag</div>
                </div>
                <div class="controls-row">
                    <button class="btn small" id="restartBtn">Restart</button>
                    <button class="btn small ghost" id="backBtn">Back</button>
                </div>
            </div>
            <div class="player-body" id="playerBody">
                <div class="empty">Loading...</div>
            </div>
        </div>
    </div>

    <script>
        // Minimal demo games collection
        const games = [
            {
                id: 'paddle',
                title: 'Paddle Bounce',
                tags: ['arcade','classic'],
                thumb: 'ðŸ“',
                desc: 'Keep the ball alive with your paddle. Mouse or touch to move.'
            },
            {
                id: 'snake',
                title: 'Snake',
                tags: ['arcade','classic','puzzle'],
                thumb: 'ðŸŸ©',
                desc: 'Classic snake. Eat apples, avoid walls and yourself.'
            },
            {
                id: 'countdown',
                title: 'Reaction Tap',
                tags: ['puzzle','arcade'],
                thumb: 'âš¡',
                desc: 'Tap as fast as you can during a short countdown.'
            }
        ];

        const grid = document.getElementById('grid');
        const searchInput = document.getElementById('search');
        const modal = document.getElementById('modal');
        const playerBody = document.getElementById('playerBody');
        const playerTitle = document.getElementById('playerTitle');
        const playerTags = document.getElementById('playerTags');
        const backBtn = document.getElementById('backBtn');
        const restartBtn = document.getElementById('restartBtn');
        const chips = document.querySelectorAll('.chip');

        // render cards
        function render(list){
            grid.innerHTML = '';
            list.forEach(g=>{
                const el = document.createElement('div');
                el.className = 'card';
                el.innerHTML = `
                    <div class="thumb">${g.thumb}</div>
                    <div style="display:flex;justify-content:space-between;align-items:center">
                        <div>
                            <div class="title">${g.title}</div>
                            <div class="tags">${g.tags.join(' â€¢ ')}</div>
                        </div>
                        <div class="controls">
                            <button class="btn play" data-id="${g.id}">Play</button>
                            <button class="btn ghost small info" data-id="${g.id}">Info</button>
                        </div>
                    </div>
                `;
                grid.appendChild(el);
            });
            document.querySelectorAll('.play').forEach(b=>b.addEventListener('click', ()=>openGame(b.dataset.id)));
            document.querySelectorAll('.info').forEach(b=>b.addEventListener('click', ()=>info(b.dataset.id)));
        }

        function info(id){
            const g = games.find(x=>x.id===id);
            alert(g.title + "\\n\\n" + g.desc + "\\nTags: " + g.tags.join(', '));
        }

        function openGame(id){
            const g = games.find(x=>x.id===id);
            playerTitle.textContent = g.title;
            playerTags.textContent = g.tags.join(' â€¢ ');
            modal.classList.add('open');
            modal.setAttribute('aria-hidden','false');
            loadGame(id);
        }

        function closeGame(){
            stopCurrentGame();
            modal.classList.remove('open');
            modal.setAttribute('aria-hidden','true');
            playerBody.innerHTML = '<div class="empty">Loading...</div>';
        }

        backBtn.addEventListener('click', closeGame);
        window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeGame(); });

        // filter/search
        searchInput.addEventListener('input', e=> applyFilter());
        chips.forEach(c=> c.addEventListener('click', e=>{ chips.forEach(x=>x.classList.remove('active')); c.classList.add('active'); applyFilter(); }));

        function applyFilter(){
            const q = searchInput.value.trim().toLowerCase();
            const chip = document.querySelector('.chip.active');
            const tag = chip ? chip.dataset.filter : '';
            const filtered = games.filter(g=>{
                const matchesQ = !q || g.title.toLowerCase().includes(q) || g.desc.toLowerCase().includes(q) || g.tags.join(' ').includes(q);
                const matchesTag = !tag || g.tags.includes(tag);
                return matchesQ && matchesTag;
            });
            render(filtered);
        }

        // basic game loader and simple implementations
        let currentGame = null;
        let animHandle = null;

        function stopCurrentGame(){
            if(currentGame && currentGame.stop) currentGame.stop();
            currentGame = null;
            if(animHandle) { cancelAnimationFrame(animHandle); animHandle = null; }
            playerBody.innerHTML = '';
        }

        function loadGame(id){
            stopCurrentGame();
            if(id==='paddle') initPaddle();
            else if(id==='snake') initSnake();
            else if(id==='countdown') initReaction();
        }

        // ------------------ Paddle Bounce ------------------
        function initPaddle(){
            playerBody.innerHTML = '';
            const canvas = document.createElement('canvas');
            canvas.width = 800; canvas.height = 480;
            playerBody.appendChild(canvas);
            const ctx = canvas.getContext('2d');
            let w = canvas.width, h = canvas.height;
            let paddle = {x:w/2-60,y:h-32,w:120,h:12};
            let ball = {x:w/2,y:h/2,r:9,vx:4,vy:4};
            let score = 0;
            let running = true;

            function resize(){ /* canvas fixed size for demo */ }
            function draw(){
                ctx.clearRect(0,0,w,h);
                // background
                ctx.fillStyle='#021826';
                ctx.fillRect(0,0,w,h);
                // ball
                ctx.beginPath(); ctx.fillStyle='#60a5fa'; ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2); ctx.fill();
                // paddle
                ctx.fillStyle='#3b82f6'; ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
                // score
                ctx.fillStyle='#9bb7c9'; ctx.font='18px system-ui'; ctx.fillText('Score: '+score,12,26);
            }

            function step(){
                if(!running) return;
                ball.x += ball.vx; ball.y += ball.vy;
                // walls
                if(ball.x - ball.r < 0){ ball.x = ball.r; ball.vx *= -1; }
                if(ball.x + ball.r > w){ ball.x = w - ball.r; ball.vx *= -1; }
                if(ball.y - ball.r < 0){ ball.y = ball.r; ball.vy *= -1; }

                // paddle collision
                if(ball.y + ball.r >= paddle.y && ball.y + ball.r <= paddle.y + 24 && ball.x > paddle.x && ball.x < paddle.x + paddle.w){
                    ball.vy *= -1;
                    // change angle depending on hit position
                    const hit = (ball.x - (paddle.x + paddle.w/2)) / (paddle.w/2);
                    ball.vx += hit * 1.5;
                    score++;
                }

                // bottom - lose
                if(ball.y - ball.r > h){
                    running = false;
                }

                draw();
                animHandle = requestAnimationFrame(step);
            }

            // input
            function onMove(e){
                const rect = canvas.getBoundingClientRect();
                const clientX = (e.touches ? e.touches[0].clientX : e.clientX);
                const x = clientX - rect.left;
                paddle.x = Math.min(Math.max(0, x - paddle.w/2), w - paddle.w);
            }
            canvas.addEventListener('mousemove', onMove);
            canvas.addEventListener('touchmove', onMove, {passive:true});

            // expose control
            currentGame = {
                stop(){ running=false; canvas.removeEventListener('mousemove', onMove); canvas.removeEventListener('touchmove', onMove); },
                restart(){ ball.x=w/2; ball.y=h/2; ball.vx=4; ball.vy=4; score=0; running=true; step(); }
            };
            restartBtn.onclick = ()=> currentGame && currentGame.restart();
            step();
        }

        // ------------------ Snake ------------------
        function initSnake(){
            playerBody.innerHTML = '';
            const canvas = document.createElement('canvas');
            const size = 18; // grid size
            const cols = 32, rows = 20;
            canvas.width = cols*size; canvas.height = rows*size;
            playerBody.appendChild(canvas);
            const ctx = canvas.getContext('2d');

            let dir = {x:1,y:0};
            let snake = [{x:Math.floor(cols/2), y:Math.floor(rows/2)}];
            let food = randomFood();
            let running = true;
            let speed = 8; // frames per second
            let lastTick = 0;

            function randomFood(){
                while(true){
                    const p = {x: Math.floor(Math.random()*cols), y: Math.floor(Math.random()*rows)};
                    if(!snake.some(s=>s.x===p.x && s.y===p.y)) return p;
                }
            }

            function drawGrid(){ ctx.fillStyle='#021826'; ctx.fillRect(0,0,canvas.width,canvas.height); }

            function draw(){
                drawGrid();
                // food
                ctx.fillStyle='#f97316'; ctx.fillRect(food.x*size+2, food.y*size+2, size-4, size-4);
                // snake
                for(let i=0;i<snake.length;i++){
                    ctx.fillStyle = i===0 ? '#60a5fa' : '#3b82f6';
                    ctx.fillRect(snake[i].x*size+1, snake[i].y*size+1, size-2, size-2);
                }
                // score
                ctx.fillStyle='#9bb7c9'; ctx.font='14px system-ui';
                ctx.fillText('Score: '+(snake.length-1), 8, 18);
            }

            function tick(){
                if(!running) return;
                // move
                const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};
                // wall collision
                if(head.x < 0 || head.x >= cols || head.y < 0 || head.y >= rows || snake.some(s=>s.x===head.x && s.y===head.y)){
                    running = false;
                    return;
                }
                snake.unshift(head);
                if(head.x === food.x && head.y === food.y){
                    food = randomFood();
                } else {
                    snake.pop();
                }
            }

            function loop(ts){
                if(!lastTick) lastTick = ts;
                const msPerFrame = 1000 / speed;
                if(ts - lastTick > msPerFrame){
                    tick();
                    draw();
                    lastTick = ts;
                }
                if(running) animHandle = requestAnimationFrame(loop);
            }

            // input keys
            function onKey(e){
                const k = e.key;
                if(k==='ArrowUp' && dir.y===0){ dir = {x:0,y:-1}; }
                if(k==='ArrowDown' && dir.y===0){ dir = {x:0,y:1}; }
                if(k==='ArrowLeft' && dir.x===0){ dir = {x:-1,y:0}; }
                if(k==='ArrowRight' && dir.x===0){ dir = {x:1,y:0}; }
            }
            window.addEventListener('keydown', onKey);

            currentGame = {
                stop(){ running=false; window.removeEventListener('keydown', onKey); },
                restart(){ dir={x:1,y:0}; snake=[{x:Math.floor(cols/2), y:Math.floor(rows/2)}]; food=randomFood(); running=true; lastTick=0; animHandle = requestAnimationFrame(loop); }
            };
            restartBtn.onclick = ()=> currentGame && currentGame.restart();
            animHandle = requestAnimationFrame(loop);
            draw();
        }

        // ------------------ Reaction Tap (tiny) ------------------
        function initReaction(){
            playerBody.innerHTML = '';
            const container = document.createElement('div');
            container.style.display='flex'; container.style.flexDirection='column'; container.style.alignItems='center'; container.style.justifyContent='center'; container.style.gap='8px';
            const bigBtn = document.createElement('button');
            bigBtn.textContent = 'Start';
            bigBtn.className = 'btn';
            bigBtn.style.fontSize='20px'; bigBtn.style.padding='18px 28px';
            const info = document.createElement('div');
            info.className='tags';
            info.textContent = 'Tap as many times as you can in 5 seconds';
            container.appendChild(info);
            container.appendChild(bigBtn);
            playerBody.appendChild(container);

            let running=false, count=0, timer=0;

            function start(){
                running=true; count=0; bigBtn.textContent='Tap';
                const duration = 5000;
                const t0 = performance.now();
                function tick(ts){
                    if(!running) return;
                    timer = ts - t0;
                    if(timer >= duration){ running=false; bigBtn.textContent='Start'; info.textContent = 'Result: ' + count + ' taps'; return; }
                    animHandle = requestAnimationFrame(tick);
                }
                animHandle = requestAnimationFrame(tick);
            }

            bigBtn.addEventListener('click', ()=>{
                if(!running) start();
                else count++;
            });

            currentGame = { stop(){ running=false; if(animHandle) cancelAnimationFrame(animHandle); }, restart(){ running=false; info.textContent='Tap as many times as you can in 5 seconds'; bigBtn.textContent='Start'; } };
            restartBtn.onclick = ()=> currentGame && currentGame.restart();
        }

        // initial render
        render(games);
    </script>
</body>
</html>
